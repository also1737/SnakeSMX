<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <title>Test</title>
    </head>
    <script>
        
        let numero = 0;
        
        //incrementa el número cada vez que se pulsa el botón
        function boton() {
            numero = numero + 1000;
            document.getElementById("numero").innerHTML = numero;
        };
        
        //usuario
        let usuario = "pepazo_tercero";

        //sacamos la fecha actual
        let d = new Date();
        let año = String(d.getFullYear());
        let mes = String(d.getMonth() + 1);
        let dia = String(d.getDate());

        let Fecha = año + "-" + mes + "-" + dia;//formato que acepta mysql

        alert(Fecha);

        //realizamos la petición a php
        function subir() {
        
            //creamos la petición
            var xhttp = new XMLHttpRequest();
        
            xhttp.onreadystatechange = function() {
        
                //si la petición se realiza correctamente, mostramos el contenido devuelto por el php
                if (this.readyState == 4 && this.status == 200) {
                
                    document.getElementById("tabla").innerHTML = this.responseText;

                }
            }

        //hacemos una petición post al archivo php pasando todas las variables
        xhttp.open("POST", "test-ajax.php", true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        
        //variaqbles post que pasamos
        xhttp.send("puntos="+numero+"&usuario="+usuario+"&mapa=3&fecha="+Fecha+"&dif=1");

        };
    </script>
    <body>
        <p>hola</p>
        <button onclick="boton()">hazme clic</button>
        <div id="numero"></div>
        <button onclick="subir()">Subir</button>
        <div id="tabla"></div>
    </body>
</html>